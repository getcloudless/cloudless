<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Core API - Cloudless Documentation</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Core API";
    var mkdocs_page_input_path = "client.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Cloudless Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Home</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">Core API</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#cloudless">cloudless</a></li>
    
        <ul>
        
            <li><a class="toctree-l3" href="#client">Client</a></li>
        
            <li><a class="toctree-l3" href="#networkclient">NetworkClient</a></li>
        
            <li><a class="toctree-l3" href="#serviceclient">ServiceClient</a></li>
        
            <li><a class="toctree-l3" href="#pathsclient">PathsClient</a></li>
        
        </ul>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../objects/">Object Types</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../providers/">Providers</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Cloudless Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Core API</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="cloudless">cloudless</h1>
<p>Cloudless is a python library to provide a basic set of easy to use primitive operations that can
work with many different cloud providers.</p>
<p>These primitives are:</p>
<ul>
<li>Create a "Network" (also known as VPC, Network, Environment).  e.g. "dev".</li>
<li>Create a "Service" within that network.  e.g. "apache-public".</li>
<li>Easily control network connections and firewalls using "Paths".</li>
</ul>
<p>The goal is to provide an intuitive abstraction that is powerful enough to build
on, so that building other layers on top is easy and anything built on it is
automatically cross cloud.</p>
<p>The main entry point to this module is through the <code>cloudless.Client</code> object, and all calls that
interact with a backing cloud provider go through this object.</p>
<h2 id="client">Client</h2>
<pre><code class="python">Client(self, profile=None, provider=None, credentials=None)
</code></pre>

<p>Top Level Cloudless Client.</p>
<p>This is the object through which all calls to the backing service provider are made.</p>
<p>Most functionality is stored in the subclasses that are attached to this client.  Currently they
are <code>cloudless.NetworkClient</code>, <code>cloudless.ServiceClient</code>, and <code>cloudless.PathsClient</code>.  See the
documentation on those sub-components for more usage details.</p>
<p>To use:</p>
<pre><code>import cloudless
client = cloudless.Client(provider, credentials)
client.network?
client.service?
client.paths?
</code></pre>
<p>Where "provider" is the backing service provider, and "credentials" is a hash containing
whatever credentials are required by the chosen provider.  See the supported providers list for
details.</p>
<h3 id="graph">graph</h3>
<pre><code class="python">Client.graph(self)
</code></pre>

<p>Return a <a href="https://graphviz.gitlab.io/_pages/doc/info/lang.html">DOT</a> formatted graph string
containing all resources on the current provider.</p>
<p>This string can be passed to a program like graphviz to generate a graph visualization.</p>
<h2 id="networkclient">NetworkClient</h2>
<pre><code class="python">NetworkClient(self, provider, credentials)
</code></pre>

<p>Cloudless Network Client.</p>
<p>This is the object through which all network related calls are made.  The objects returned by
these commands are of type <code>cloudless.types.common.Network</code>.</p>
<p>Usage:</p>
<pre><code>import cloudless
client = cloudless.Client(provider, credentials)
client.network.create("network", blueprint="tests/blueprints/network.yml")
client.network.get("network")
client.network.list()
client.network.destroy(client.network.get("network"))
</code></pre>
<p>The above commands will create and destroy a network named "network".</p>
<h3 id="create">create</h3>
<pre><code class="python">NetworkClient.create(self, name, blueprint=None)
</code></pre>

<p>Create new network named "name" with blueprint file at "blueprint".</p>
<p>Example:</p>
<pre><code>client.network.create("mynetwork", "network-blueprint.yml")
</code></pre>
<h3 id="get">get</h3>
<pre><code class="python">NetworkClient.get(self, name)
</code></pre>

<p>Get a network named "name" and return some data about it.</p>
<p>Example:</p>
<pre><code>client.network.get("mynetwork")
</code></pre>
<h3 id="destroy">destroy</h3>
<pre><code class="python">NetworkClient.destroy(self, network)
</code></pre>

<p>Destroy the given network.</p>
<p>Example:</p>
<pre><code>client.network.destroy(client.network.get("mynetwork"))
</code></pre>
<h3 id="list">list</h3>
<pre><code class="python">NetworkClient.list(self)
</code></pre>

<p>List all networks.</p>
<p>Example:</p>
<pre><code>client.network.list()
</code></pre>
<h2 id="serviceclient">ServiceClient</h2>
<pre><code class="python">ServiceClient(self, provider, credentials)
</code></pre>

<p>Cloudless Service Client.</p>
<p>This is the object through which all service related calls are made.  The objects returned by
these commands are of type <code>cloudless.types.common.Service</code> which contain objects of type
<code>cloudless.types.common.Subnetwork</code>, which themselves contain lists of
<code>cloudless.types.common.Instance</code>.  This is because the service is the logical grouping, but
behind the scenes they are groups of instances deployed in private subnetworks.</p>
<p>Usage:</p>
<pre><code>import cloudless
client = cloudless.Client(provider, credentials)
network = client.network.create("network", blueprint="tests/blueprints/network.yml")
client.service.create(network, "public", blueprint="tests/blueprints/service.yml")
myservice = client.service.get(mynetwork, "public")
client.service.list()
client.service.destroy(myservice)
</code></pre>
<p>The above commands will create and destroy a service named "public" in the network "network".</p>
<h3 id="create_1">create</h3>
<pre><code class="python">ServiceClient.create(self, network, service_name, blueprint, template_vars=None, count=None)
</code></pre>

<p>Create a service in "network" named "service_name" with blueprint file at "blueprint".</p>
<p>"template_vars" are passed to the initialization scripts as jinja2
variables.</p>
<p>Example:</p>
<pre><code>example_network = client.network.create("example")
example_service = client.service.create(network=example_network,
                                        name="example_service",
                                        blueprint="example-blueprint.yml")
</code></pre>
<h3 id="get_1">get</h3>
<pre><code class="python">ServiceClient.get(self, network, service_name)
</code></pre>

<p>Get a service in "network" named "service_name".</p>
<p>Example:</p>
<pre><code>example_service = client.service.get(network=client.network.get("example"),
                                     name="example_service")
</code></pre>
<h3 id="get_instances">get_instances</h3>
<pre><code class="python">ServiceClient.get_instances(self, service)
</code></pre>

<p>Helper to return the list of instances given a service object.</p>
<p>Example:</p>
<pre><code>example_service = client.service.get(network=client.network.get("example"),
                                     name="example_service")
instances = client.service.get_instances(example_service)
</code></pre>
<h3 id="destroy_1">destroy</h3>
<pre><code class="python">ServiceClient.destroy(self, service)
</code></pre>

<p>Destroy a service described by the "service" object.</p>
<p>Example:</p>
<pre><code>example_service = client.service.get(network=client.network.get("example"),
                                     name="example_service")
client.service.destroy(example_service)
</code></pre>
<h3 id="list_1">list</h3>
<pre><code class="python">ServiceClient.list(self)
</code></pre>

<p>List all services.</p>
<p>Example:</p>
<pre><code>client.service.list()
</code></pre>
<h3 id="node_types">node_types</h3>
<pre><code class="python">ServiceClient.node_types(self)
</code></pre>

<p>Get mapping of node types to the resources.</p>
<p>Example:</p>
<pre><code>client.service.node_types()
</code></pre>
<h2 id="pathsclient">PathsClient</h2>
<pre><code class="python">PathsClient(self, provider, credentials)
</code></pre>

<p>Cloudless Paths Client.</p>
<p>This is the object through which all path related calls are made.  The objects returned by these
commands are of type <code>cloudless.types.common.Path</code> which contain objects of type
<code>cloudless.types.common.Service</code> and <code>cloudless.types.networking.CidrBlock</code> depending on whether
the path is internally or externally facing.</p>
<p>Usage:</p>
<pre><code>import cloudless
client = cloudless.Client(provider, credentials)
internal_service = client.service.get(network, "internal_service")
load_balancer = client.service.get(network, "load_balancer")
internet = cloudless.types.networking.CidrBlock("0.0.0.0/0")
client.paths.add(load_balancer, internal_service, 80)
client.paths.add(internet, load_balancer, 443)
client.paths.list()
client.graph()
</code></pre>
<p>The above commands will result in the public internet having access to "load_balancer" on port
443 and "load_balancer" having access to "internal_service" on port 80.</p>
<h3 id="add">add</h3>
<pre><code class="python">PathsClient.add(self, source, destination, port)
</code></pre>

<p>Make the service or cidr block described by "destination" accessible from the service or
cidr block described by "source" on the given port.</p>
<p>Either "source" or "destination" must be a service object.</p>
<p>Example:</p>
<pre><code>service1 = client.service.get(network=client.network.get("example"), name="service1")
service2 = client.service.get(network=client.network.get("example"), name="service2")
internet = cloudless.types.networking.CidrBlock("0.0.0.0/0")
client.paths.add(service1, service2, 443)
client.paths.add(internet, service1, 80)
</code></pre>
<h3 id="remove">remove</h3>
<pre><code class="python">PathsClient.remove(self, source, destination, port)
</code></pre>

<p>Ensure the service or cidr block described by "destination" is not accessible from the
service or cidr block described by "source" on the given port.</p>
<p>Either "source" or "destination" must be a service object.</p>
<p>Example:</p>
<pre><code>service1 = client.service.get(network=client.network.get("example"), name="service1")
service2 = client.service.get(network=client.network.get("example"), name="service2")
internet = cloudless.types.networking.CidrBlock("0.0.0.0/0")
client.paths.remove(service1, service2, 443)
client.paths.remove(internet, service1, 80)
</code></pre>
<h3 id="list_2">list</h3>
<pre><code class="python">PathsClient.list(self)
</code></pre>

<p>List all paths and return a dictionary structure representing a graph.</p>
<p>Example:</p>
<pre><code>client.paths.list()
</code></pre>
<h3 id="internet_accessible">internet_accessible</h3>
<pre><code class="python">PathsClient.internet_accessible(self, service, port)
</code></pre>

<p>Returns true if the service described by "service" is internet accessible on the given port.</p>
<p>Example:</p>
<pre><code>service1 = client.service.get(network=client.network.get("example"), name="service1")
client.paths.internet_accessible(service1, 443)
</code></pre>
<h3 id="has_access">has_access</h3>
<pre><code class="python">PathsClient.has_access(self, source, destination, port)
</code></pre>

<p>Returns true if the service or cidr block described by "destination" is accessible from the
service or cidr block described by "source" on the given port.</p>
<p>Either "source" or "destination" must be a service object.</p>
<p>Example:</p>
<pre><code>service1 = client.service.get(network=client.network.get("example"), name="service1")
service2 = client.service.get(network=client.network.get("example"), name="service2")
internet = cloudless.types.networking.CidrBlock("0.0.0.0/0")
client.paths.has_access(service1, service2, 443)
client.paths.has_access(internet, service1, 80)
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../objects/" class="btn btn-neutral float-right" title="Object Types">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href=".." class="btn btn-neutral" title="Home"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href=".." style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../objects/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>

</body>
</html>
